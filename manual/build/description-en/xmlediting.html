<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../css/normal.css" type="text/css" />
<link rel="stylesheet" href="../css/pygments.css" type="text/css" />
<link rel="stylesheet" href="../css/colorbox.css" type="text/css" />
<script src="../javascript/jquery.min.js" ></script>
<script src="../javascript/jquery.colorbox-min.js" ></script>
<script>
  $(document).ready(function(){
     $(".figure").colorbox({ rel: 'group1', opacity:0.5 });
  });
</script>
<title>How to edit the layout file</title>
</head>
<body>
<div id="logo"><a href="../index.html"><img src="../images/publisher_logo.png" alt="Start page"></a></div>
	<h1>How to edit the layout file</h1>
<p>The layout file is encoded in standard <span class="caps">XML</span> (<span class="caps">UTF</span>-8) and therefore it can be edited with any text editor (<a href="http://notepad-plus-plus.org">notepad++</a> for example). We provide a full RelaxNG grammar which makes editing the layout <span class="caps">XML</span> with a good <span class="caps">XML</span> editor a breeze. We know of the following editors that allow <span class="caps">XML</span> editing with the support of RelaxNG. If you know of any other <span class="caps">XML</span> editors with RelaxNG support, please drop us a note at <a href="mailto:info@speedata.de">info@speedata.de</a>.</p>
<ul>
	<li><a href="http://www.oxygenxml.com">OxygenXML</a> (Mac, Windows, Linux)</li>
	<li><a href="http://www.altova.com/xml-editor/">XMLSpy</a> (Windows)</li>
	<li><a href="http://www.gnu.org/software/emacs/"><span class="caps">GNU</span> Emacs</a> with <a href="http://www.thaiopensource.com/nxml-mode/">nxml-mode</a> (all operating systems)</li>
	<li><a href="http://www.xmlblueprint.com/"><span class="caps">XML</span> Blueprint</a> (Windows only)</li>
</ul>
<p>The schema for editing the layout <span class="caps">XML</span> can be found in the directory <code>share/schema</code> in the file <code>layoutschema-en.rng</code>. In the Linux Ubuntu package and in the virutal machine, it can be found in <code>/usr/share/speedata-publisher/schema/</code>.</p>
<h2>Note</h2>
<p>The <span class="caps">XML</span> namespace of the layout rules is <code>urn:speedata.de:2009/publisher/en</code>. The layout <span class="caps">XML</span> must look like this if you wish to validate against the Schema:</p>
<div class="highlight"><pre><code class="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;Layout</span> <span class="na">xmlns=</span><span class="s">&quot;urn:speedata.de:2009/publisher/en&quot;</span><span class="nt">&gt;</span>
 ...
<span class="nt">&lt;/Layout&gt;</span>
</code></pre></div><p>The first line with the <span class="caps">XML</span> declaration is optional. If, as expected, you use layout specific functions, you should add the following namespace declaration to the start tag:</p>
<div class="highlight"><pre><code class="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;Layout</span> <span class="na">xmlns=</span><span class="s">&quot;urn:speedata.de:2009/publisher/en&quot;</span>
        <span class="na">xmlns:sd=</span><span class="s">&quot;urn:speedata:2009/publisher/functions/en&quot;</span><span class="nt">&gt;</span>
 ...
<span class="nt">&lt;/Layout&gt;</span>
</code></pre></div><p>Replace <code>en</code> by <code>de</code> if you wish to use the German layout rules / layout function instead of the English ones.</p>
<h2>Connecting the RelaxNG Schema with the Layout <span class="caps">XML</span> in the OxygenXML editor</h2>
<p>As an example, here is how to make OxygenXML automatcially choose the right Schema if you edit the layout xml file. The fastest way is to manually connect the document to the schema:</p>
<p><a  class='figure cboxElement' href='../images/oxygen-associateschema.png'><img src='../images/oxygen-associateschema.png' class='screenshot shadow'/></a></p>
<p>(You can click on any screenshot for a larger version.)</p>
<p>Better is to use the more persistent solution. You can associate all documents in the namespace <code>urn:speedata.de:2009/publisher/en</code> with the RelaxNG schema.</p>
<p>To do this, you need to create a new rule in “document type association”.</p>
<p><a  class='figure cboxElement' href='../images/oxygen-associatedoc1.png'><img src='../images/oxygen-associatedoc1.png' class='screenshot shadow'/></a></p>
<p>Fill out the form as in the next screenshot:</p>
<p><a  class='figure cboxElement' href='../images/oxygen-associatedoc.png'><img src='../images/oxygen-associatedoc.png' class='screenshot shadow'/></a></p>
<p>and click on the <code>+</code> button to create the rule like this:</p>
<p><a  class='figure cboxElement' href='../images/oxygen-associatenamespace.png'><img src='../images/oxygen-associatenamespace.png' class='screenshot shadow'/></a></p>
<p>After that, you need to supply the path to the RelaxNG schema file (here: a local installation).</p>
<p><a  class='figure cboxElement' href='../images/oxygen-associateschema2.png'><img src='../images/oxygen-associateschema2.png' class='screenshot shadow'/></a></p>
<p>The dialog must be confirmed with <code>OK</code>. If you now open a layout <span class="caps">XML</span> file, it should be automatically connected to the schema and you get full editor support (command completion, tool tip help, validation).</p>
<div style="clear:both; border-bottom: 1px solid #a0a0a0; width: 100%"></div>
<a href="../index.html">Start page</a> | <a href="../commands-en/layout.html">Element reference</a> | Other language: <a href="../description-de/xmlediting.html">German</a> 
</body>
</html>
