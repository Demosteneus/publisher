<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../css/normal.css" type="text/css" />
<link rel="stylesheet" href="../css/pygments.css" type="text/css" />
<link rel="stylesheet" href="../css/colorbox.css" type="text/css" />
<script src="../javascript/jquery.min.js" ></script>
<script src="../javascript/jquery.colorbox-min.js" ></script>
<script>
  $(document).ready(function(){
     $(".figure").colorbox({ rel: 'group1', opacity:0.5 });
  });
</script>
<title>XPath Ausdrücke</title>
</head>
<body>
<div id="logo"><a href="../index-de.html"><img src="../images/publisher_logo.png" alt="Startseite"></a></div>
	<h1>XPath Ausdrücke</h1>
<p>Der Publisher akzeptiert in den den entsprechend markierten Attributen (zumeist <code>auswahl</code> und <code>bedingung</code>) XPath Ausdrücke. In allen anderen Attributen kann durch die geschweiften Klammern (<code>{</code> und <code>}</code>) ein XPath Ausdruck erzwungen werden. In diesem Beispiel werden im Attribut <code>breite</code> und im Element <code>Wert</code> die Werte dynamisch erzeugt, d.h. für die Angabe der Breite wird auf den Inhalt der Variablen <code>breite</code> zurückgegriffen, der Inhalt des Absatzes ist der Inhalt (Textwert) des gerade aktuellen Datenknotens.</p>
<div class="highlight"><pre><code class="xml"><span class="nt">&lt;Textblock</span> <span class="na">breite=</span><span class="s">&quot;{$breite}&quot;</span> <span class="na">schriftart=</span><span class="s">&quot;text&quot;</span> <span class="na">textformat=</span><span class="s">&quot;Text mit Einrückung&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;Absatz&gt;</span>
    <span class="nt">&lt;Wert</span> <span class="na">auswahl=</span><span class="s">&quot;.&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/Absatz&gt;</span>
<span class="nt">&lt;/Textblock&gt;</span>
</code></pre>
</div>
<h2>Folgende XPath-Ausdrücke erkennt das System:</h2>
<ul>
	<li>Zahl: gibt den Wert direkt zurück. Beispiel: <code>"5"</code></li>
	<li>Text: gibt den Wert direkt zurück. Beispiel: <code>'Text'</code></li>
	<li>Rechenoperationen (<code>*</code>, <code>div</code>, <code>+</code>, <code>-</code>, <code>mod</code>). Beispiel: <code>( 6 + 4.5 ) * 2</code></li>
	<li>Zugriff auf Variablen. Beispiel: <code>$spalte + 2</code></li>
	<li>Zugriff auf den aktuellen Knoten (Punkt-Operator). Beispiel: <code>. + 2</code></li>
	<li>Zugriff auf Unterelemente. Beispiel: <code>produktdaten</code>, <code>node()</code>, <code>*</code></li>
	<li>Zugriff auf Attribute im aktuellen Knoten. Beispiel <code>@a</code></li>
	<li>Boolesche Ausdrücke: <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>=</code>, <code>!=</code>. Vorsicht, das Zeichen <code>&lt;</code> muss in <span class="caps">XML</span> als <code>&amp;lt;</code> geschrieben werden, das Zeichen <code>&gt;</code> kann als <code>&amp;gt;</code> geschrieben werden. Beispiel: <code>$zahl &gt; 6</code>. Kann in Bedingungen benutzt werden.</li>
</ul>
<h2>Folgende XPath-Funktionen stehen bereit:</h2>
<p>Es gibt zwei Klassen von XPath Funktionen: standardkonforme und speedata Publisher spezifische Funktionen. Die spezifischen Funktionen sind im Namensraum <code>urn:speedata:2009/publisher/functions/de</code> (im Folgenden mit <code>sd:</code> gekennzeichnet). Die Standard Funktionen sollten sich wie XPath 2.0 verhalten.</p>
<dl>
	<dt>sd:aktuelle-seite()</dt>
	<dd>Gibt die Seitennummer zurück.</dd>
	<dt>sd:aktuelle-zeile()</dt>
	<dd>Gibt die aktuelle Zeile zurück.</dd>
	<dt>sd:aktuelle-spalte()</dt>
	<dd>Gibt die aktuelle Spalte zurück.</dd>
	<dt>sd:alternierend(&lt;typ&gt;, &lt;text&gt;,&lt;text&gt;,.. )</dt>
	<dd>Bei jedem Aufruf wird das nächste Argument zurück gegeben. Wert des Typs ist beliebig, muss aber eindeutig sein. Beispiel: <code>sd:alternierend("tbl", "Weiß","Grau")</code> könnte für die Hintergrundfarbe von Tabellen benutzt werden.</dd>
	<dt>sd:alternierend-zurücksetzen(&lt;typ&gt;)</dt>
	<dd>Setzt den Zustand für <code>sd:alternierend()</code> für den angegebenen Typ zurück.</dd>
	<dt>sd:anzahl-datensätze(&lt;Sequenz&gt;)</dt>
	<dd>Gibt die Anzahl der Datensätze der Sequenz zurück.</dd>
	<dt>sd:anzahl-seiten(&lt;Dateiname oder <span class="caps">URI</span>-Schema&gt;)</dt>
	<dd>Ermittelt die Anzahl der Seiten der angegebenen (<span class="caps">PDF</span>-)Datei.</dd>
	<dt>sd:anzahl-spalten()</dt>
	<dd>Gibt die Anzahl der Spalten im aktuellen Raster.</dd>
	<dt>sd:anzahl-zeilen()</dt>
	<dd>Gibt die Anzahl der Zeilen im aktuellen Raster.</dd>
	<dt>sd:bildbreite(&lt;Dateiname oder <span class="caps">URI</span>-Schema&gt;)</dt>
	<dd>Breite des Bildes in Rasterzellen. Vorsicht: sollte das Bild nicht gefunden werden, wird die Breite des Platzhalters für nicht gefundene Bilder zurückgegeben. Daher muss vorher überprüft werden, ob das Bild existiert.</dd>
	<dt>sd:datei-vorhanden(&lt;Dateiname oder <span class="caps">URI</span>-Schema&gt;)</dt>
	<dd>Wahr, wenn der Dateiname im Suchpfad existiert, ansonsten false.</dd>
	<dt>sd:formatiere-zahl(Zahl oder String, Tausenderzeichen, Kommazeichen)</dt>
	<dd>Formatiert die übergebene Zahl und fügt Tausender-Trennzeichen hinzu und ändert den Kommatrenner. Beispiel: <code>sd:formatiere-zahl(12345.67, '.',',')</code> ergibt die Zeichenkette <code>1.2345,67</code>.</dd>
	<dt>sd:formatiere-string(Zahl oder String,Formartierungsangaben)</dt>
	<dd>Gibt eine Zeichenkette zurück, die die gegebene Zahl mit den im zweiten Argument gegebenen Formatierungsanweisungen darstellt. Die Formatierungsanweisungen entsprechen der aus der Programmiersprache C bekannten <code>printf()</code>-Funktion.</dd>
	<dt>sd:gerade(&lt;zahl&gt;)</dt>
	<dd>Wahr, wenn die angegebene Zahl gerade ist. Beispiel: <code>sd:gerade(sd:aktuelle-seite())</code></dd>
	<dt>sd:ungerade(&lt;zahl&gt;)</dt>
	<dd>Wahr, wenn die angegebene Zahl ungerade ist.</dd>
	<dt>sd:gruppenbreite(&lt;string&gt;)</dt>
	<dd>Gibt die Breite in Rasterzellen für die Gruppe im ersten Argument an. Beispiel: <code>sd:gruppenbreite('Beispielgruppe')</code></dd>
	<dt>sd:gruppenhöhe(&lt;string&gt;)</dt>
	<dd>Gibt die Höhe in Rasterzellen für die Gruppe im ersten Argument an. Beispiel: <code>sd:gruppenbreite('Beispielgruppe')</code></dd>
	<dt>sd:seitennummer(&lt;Marke&gt;)</dt>
	<dd>Liefert die Seitenzahl der Seite auf der die angegebene Marke ausgegeben wurde. Siehe den Befehl <a href="../commands-de/mark.html">Marke</a></dd>
	<dt>sd:variable(&lt;Name&gt;)</dt>
	<dd>ist dasselbe wie $Name, nur mit der Möglichkeit den Namen auch dynamisch (z.B. mit <code>concat()</code>) zu erzeugen.</dd>
</dl>
<dl>
	<dt>concat( &lt;Wert&gt;,&lt;Wert&gt;, &#8230; )</dt>
	<dd>Erzeugt einen neuen Text aus der Verkettung der einzelnen Werte.</dd>
	<dt>count()</dt>
	<dd>Zählt alle Kindelemente mit dem angegebenen Namen. Beispiel: <code>count(eintrag)</code> zählt, wie viele Kindelemente mit den Namen <code>eintrag</code> existieren.</dd>
	<dt>ceiling()</dt>
	<dd>Gibt den aufgerundeten Wert einer Zahl zurück.</dd>
	<dt>empty(&lt;Attribut&gt;)</dt>
	<dd>Prüft, ob ein Attribut (nicht) vorhanden ist.</dd>
	<dt>false()</dt>
	<dd>Gibt „Falsch“ zurück.</dd>
	<dt>floor()</dt>
	<dd>Gibt den abgerundeten Wert einer Zahl zurück.</dd>
	<dt>last()</dt>
	<dd>Gibt die Anzahl der Datensätze der gleichnamigen Geschwister-Elemente zurück. <strong>Achtung: noch nicht XPath-konform.</strong></dd>
	<dt>position()</dt>
	<dd>Ermittelt die Position des aktuellen Datensatzes.</dd>
	<dt>string(&lt;Sequenz&gt;)</dt>
	<dd>Gibt den Textwert der Sequenz zurück, d.h. den Inhalt der Elemente.</dd>
	<dt>true()</dt>
	<dd>Gibt „Wahr“ zurück.</dd>
</dl>
<div style="clear:both; border-bottom: 1px solid #a0a0a0; width: 100%"></div>
<a href="../index-de.html">Startseite</a> | <a href="../commands-de/layout.html">Befehlsreferenz</a> | Andere Sprache: <a href="../description-en/xpath.html">Englisch</a> 
</body>
</html>
