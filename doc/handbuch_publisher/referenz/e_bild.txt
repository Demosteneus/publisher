#title "Bild"
#format "textile"

h1. Elementname: @Bild@

h2. Beschreibung

Bindet eine externe Grafik ein. Erlaubte Grafikformate sind PDF (@.pdf@), PNG (@.png@) und JPEG (@.jpg@).

Erlaubte Attribute: @breite@, @datei@, @höhe@, @seite@, @natürliche-größe@, @maximale-größe@
Kindelemente: -
Elternelemente: "ObjektAusgeben":e_objektausgeben

h3. Attribute

- @breite@ (Zahl oder "Maßangabe":massangabe) := Die Breite in Rasterzellen, den das Bild im Raster belegt.
- @höhe@ (Zahl oder "Maßangabe":massangabe, optional) := Die maximale Höhe, die das Bild im Raster belegt.
- @datei@ (Text) := Dateiname des Bildes.
- @seite@ (Zahl, optional) := Die Seitenzahl aus dem PDF. Voreinstellung ist 1.
- @natürliche-größe@ (Text, optional) := Die PDF-Box, die den sichtbaren Bereich angibt. Voreinstellung ist »cropbox«.
- @maximale-größe@ (Text, optional) := Die PDF-Box, die die maximale Größe angibt. Voreinstellung ist »cropbox«.

Die Werte der Attribute @natürliche-größe@ und @maximale-größe@ können @artbox@, @bleedbox@, @cropbox@, @mediabox@ und @trimbox@  sein. Diese beiden Angaben werden dafür benutzt, um das eingebundene Bild für den Anschnitt zu vergrößern. Im zweiten Beispiel unten ist der gewünschte Bildausschnitt in der »artbox« definiert, die Grafik in der PDF-Datei hat aber noch eine Beschnittzugabe, deren Ausmaß hier in der »cropbox« beschrieben ist. Die im zweiten Beispiel angegebene Breite entspricht der Papierbreite, so dass das der Inhalt der »artbox« 21cm breit dargestellt wird, der Anschnitt um das Bild herum aber weiterhin existiert.


h2. Beispiel

pre(xml). <Datensatz element="produktbild">
  <ObjektAusgeben spalte="{ $spalte }">
    <Bild breite="10" datei="{string(.)}" />
  </ObjektAusgeben>
</Datensatz>

Nimmt den Dateinamen des Bildes aus dem Elementinhalt »produktbild« aus der Datensatzdatei, z.B.

pre(xml). <produktbild>grafik.pdf</produktbild>

Folgendes Beispiel nimmt eine Seite aus einer PDF Datei:

pre(xml). <ObjektAusgeben spalte="0mm" zeile="0mm">
  <Bild breite="210mm" datei="katalog.pdf" seite="132" natürliche-größe="artbox" />
</ObjektAusgeben>

In diesem Beispiel entspricht die Breite »210mm« der Breite der Seite, so dass das Bild links oben (0mm,0mm) ausgegeben wird und durch den (hier nicht sichtbaren) Größenunterschied der »artbox« und der »cropbox« ein Anschnitt entsteht.

h2. Bildumrisse

Bilder nehmen üblicherweise einen rechteckigen Bereich im Raster ein. Durch eine _Umrissdatei_ kann der Publisher angewiesen werden, nur einen Teil des Rasters zu belegen. Eine Umrissdatei ist eine XML-Datei mit demselben Namen des Bildes und der Dateiendung @xml@. Diese Datei hat folgenden Aufbau:

pre(xml). <?xml version="1.0" ?>
<imageinfo>
   <cells_x>30</cells_x>
   <cells_y>21</cells_y>
   <segment x1='13' y1='0' x2='16' y2='0' />
   <segment x1='13' y1='1' x2='16' y2='1' />
   <segment x1='11' y1='2' x2='18' y2='2' />
   <segment x1='10' y1='3' x2='18' y2='3' />
   <segment x1='10' y1='4' x2='18' y2='4' />
   <segment x1='9' y1='5' x2='20' y2='5' />
   <segment x1='8' y1='6' x2='20' y2='6' />
   <segment x1='8' y1='7' x2='20' y2='7' />
   <segment x1='7' y1='8' x2='21' y2='8' />
   <segment x1='6' y1='9' x2='21' y2='9' />
   <segment x1='5' y1='10' x2='22' y2='10' />
   <segment x1='5' y1='11' x2='24' y2='11' />
   <segment x1='4' y1='12' x2='25' y2='12' />
   <segment x1='3' y1='13' x2='25' y2='13' />
   <segment x1='3' y1='14' x2='27' y2='14' />
   <segment x1='2' y1='15' x2='27' y2='15' />
   <segment x1='2' y1='16' x2='27' y2='16' />
 <segment x1='1' y1='17' x2='28' y2='17' />
 </imageinfo>

Wobei @cells_x@ und @cells_y@ eine beliebige Zahl an Rasterzellen sind. Die Segmente sind Stellen im Bild, die belegt werden sollen. Wenn ein solches Bild eingebunden wird, wird das in der XML-Datei angegebene Raster auf das Raster im Publisher projiziert.


h2. Hinweis

Die Anzahl der Seiten in einer PDF-Datei kann mit der "XPath-Funktion":xpath @sd:anzahl-seiten(<dateiname>)@ ermittelt werden.

h2. Siehe auch

"ObjektAusgeben":e_objektausgeben